---
phase: 01-booking-foundation
plan: 06
type: execute
wave: 5
depends_on: ["01-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can complete full booking flow from service selection to confirmation"
    - "Booking appears in database with PENDING status"
    - "Business owner sees booking in their dashboard"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete booking flow works end-to-end.

Purpose: Human verification that all pieces work together correctly. This is a functional test checkpoint to catch any integration issues before the phase is marked complete.

Output: Verified booking flow, any issues documented for fixing.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-booking-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete booking system with:
- Service model in database
- Service CRUD API and dashboard management
- Public booking page at /business/[id]/book
- Three-step booking flow (service -> date/time -> confirm)
- Time slot generation based on availability
- Booking creation with PENDING status
  </what-built>
  <how-to-verify>
1. **Setup availability (if not already done):**
   - Log in as a business owner
   - Go to dashboard and ensure business has availability set up
   - If no BusinessAvailability records exist, create some via Prisma Studio or seed script

2. **Add services:**
   - Go to /dashboard/services
   - Add at least 2 services with different durations (e.g., 30 min and 60 min)
   - Verify services save correctly (refresh page, services should persist)

3. **Test booking flow as customer:**
   - Log out or use incognito window
   - Navigate to /business/[business-id]/book
   - Verify services list appears with prices
   - Select a service
   - Verify calendar appears with correct disabled days
   - Select an available date
   - Verify time slots load (may be empty if no availability set)
   - Select a time slot
   - Verify confirmation summary shows correct details
   - Log in when prompted (or stay logged in as different user)
   - Submit booking
   - Verify success message appears

4. **Verify booking created:**
   - Go to /bookings as the customer
   - Verify the booking appears with PENDING status
   - Check Prisma Studio: `npx prisma studio`
   - Find the Booking record and verify:
     - status = PENDING
     - serviceType matches selected service
     - appointmentDate and appointmentTime correct
     - duration matches service duration

5. **Check business owner view:**
   - Log in as business owner
   - Go to /dashboard or /dashboard/bookings
   - Verify incoming booking appears

6. **Edge cases to test:**
   - Try booking same slot twice (second should fail or show slot unavailable)
   - Try booking on a day business is closed (day should be disabled)
   - Try booking in the past (should be disabled)
  </how-to-verify>
  <resume-signal>
Type "approved" if booking flow works correctly, or describe any issues found.
If issues found, they will be addressed in a gap closure plan.
  </resume-signal>
</task>

</tasks>

<verification>
- [ ] Services can be added and managed via dashboard
- [ ] Public booking page displays services
- [ ] Calendar shows available/unavailable days correctly
- [ ] Time slots reflect actual availability
- [ ] Booking submission creates database record
- [ ] Customer can see their booking in /bookings
- [ ] Business owner can see incoming booking
</verification>

<success_criteria>
- Complete booking flow works without errors
- All Must-Haves from ROADMAP.md are satisfied:
  1. Service model and API for business services - YES
  2. Business service management UI in owner dashboard - YES
  3. Public booking page at /business/[id]/book - YES
  4. Available time slots displayed in calendar/grid view - YES
  5. Slot selection with service summary - YES
  6. Booking confirmation with details display - YES
  7. New booking creates database record with PENDING status - YES
</success_criteria>

<output>
After completion, create `.planning/phases/01-booking-foundation/01-06-SUMMARY.md`
</output>
